<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>1Q ON CATCH – 내부보고용</title>
  <style>
    :root{
      --brand:#00a39a; --brand-dark:#008c83; --accent:#00a39a;
      --bg:#f5f7fb; --card:#ffffff; --text:#0d1b2a; --muted:#5b6779; --line:#e6ebf2;
      --warn:#eab308; --danger:#ef4444; --ok:#16a34a; --info:#0284c7;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font:14px/1.6 "Segoe UI",Roboto,Helvetica,Arial,sans-serif}
    a{color:var(--accent);text-decoration:none}

    /* 상단바 */
    .topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;gap:16px;padding:12px 16px;background:var(--card);border-bottom:1px solid var(--line)}
    .brand{display:flex;align-items:center;gap:10px;font-weight:700;color:var(--text);text-decoration:none}
    .logo{width:30px;height:30px;border-radius:8px;background:linear-gradient(135deg,var(--brand),var(--brand-dark));display:grid;place-items:center;color:#fff;font-size:12px;letter-spacing:.5px;font-weight:800}
    .sysname{font-size:16px}

    /* 네비게이션 */
    .nav{display:flex;flex-wrap:wrap;gap:8px;margin-left:8px;margin-right:auto;position:relative}
    .menu{position:relative}
    .trigger{
      border:1px solid var(--line);background:#fff;color:#22303c;padding:8px 12px;border-radius:8px;cursor:pointer;
      display:flex;align-items:center;gap:6px;
    }
    .trigger.active{border-color:var(--brand);background:var(--brand);color:#fff}
    .has-dd.trigger:after{content:"▾"; font-size:10px; opacity:.7}

    .dropdown{
      display:none; position:absolute; top:42px; left:0; min-width:200px; background:#fff; border:1px solid var(--line);
      border-radius:10px; box-shadow:0 8px 24px rgba(0,0,0,.06); padding:6px; z-index:60;
    }
    .menu.dd.open .dropdown{display:block}

    .dropdown button{
      width:100%; text-align:left; background:#fff; border:none; padding:8px 10px; border-radius:8px; cursor:pointer; color:#22303c;
    }
    .dropdown button:hover{background:#f3f7fa}

    /* 우측 계정 */
    .account{display:flex;align-items:center;gap:10px}
    .avatar{width:28px;height:28px;border-radius:50%;background:#008c83;color:#fff;display:grid;place-items:center;font-size:12px;font-weight:800}
    .user-name{color:#22303c;font-weight:600}
    .auth-btn{border:1px solid var(--line);background:#fff;color:#22303c;padding:6px 10px;border-radius:8px;cursor:pointer}

    /* 공통 UI */
    .container{max-width:1200px;margin:18px auto;padding:0 16px}
    .section{display:none}
    .section.active{display:block}
    .grid{display:grid;gap:16px}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}.grid.cols-2{grid-template-columns:repeat(2,1fr)}}
    .card{background:var(--card);border:1px solid var(--line);border-radius:12px;overflow:hidden}
    .card .hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line);font-weight:600}
    .card .bd{padding:14px 16px}
    .muted{color:var(--muted)}
    .btn{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);padding:8px 12px;border-radius:8px;background:#fff;color:#22303c;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand-dark);color:#fff}
    .btn.ghost{background:#fff}
    .btn.block{width:100%;justify-content:center}
    .btn.grow{flex:1;justify-content:center}
    .tbl{width:100%;border-collapse:collapse}
    .tbl th,.tbl td{border-bottom:1px solid var(--line);padding:10px 8px;text-align:left}
    .chip{display:inline-block;padding:.2rem .55rem;border-radius:999px;font-size:12px;border:1px solid transparent}
    .chip.ok{background:#ecfdf5;color:#065f46;border-color:#bbf7d0}
    .chip.warn{background:#fffbeb;color:#92400e;border-color:#fde68a}
    .chip.bad{background:#fef2f2;color:#991b1b;border-color:#fecaca}
    .chip.info{background:#eff6ff;color:#1e40af;border-color:#bfdbfe}
    .hero{display:flex;gap:18px;flex-wrap:wrap;align-items:center}
    .kpi{flex:1 1 220px;background:var(--card);border:1px solid var(--line);border-radius:12px;padding:14px 16px}
    .kpi h3{margin:0 0 6px 0;font-size:12px;color:var(--muted);font-weight:600}
    .kpi p{margin:0;font-size:22px;font-weight:700}
    .note{font-size:12px;color:var(--muted)}
    .footer{padding:24px;color:var(--muted);text-align:center}
    .subnav{display:flex;gap:8px;flex-wrap:wrap;padding:10px 16px;border-bottom:1px solid var(--line);background:#fafcff}
    .subnav .pill{padding:6px 10px;border-radius:999px;border:1px solid var(--line);cursor:pointer}
    .subnav .pill.active{background:var(--brand);border-color:var(--brand-dark);color:#fff}
    .empty{padding:24px;border:1px dashed var(--line);border-radius:10px;text-align:center;color:var(--muted)}

    /* 모달 */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(13,27,42,.36);z-index:100}
    .modal.open{display:flex}
    .dialog{width:min(760px,92vw);background:#fff;border-radius:12px;border:1px solid var(--line);box-shadow:0 12px 32px rgba(0,0,0,.18);overflow:hidden}
    .dialog .hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line);font-weight:700}
    .dialog .bd{padding:14px 16px}
    .dialog .ft{display:flex;gap:8px;padding:12px 16px;border-top:1px solid var(--line);background:#fafcff;justify-content:flex-end}
    .form{display:grid;gap:12px}
    .row{display:grid;gap:8px}
    .row.inline{grid-template-columns:1fr 1fr;gap:12px}
    label{font-size:12px;color:var(--muted)}
    input[type="text"],input[type="email"],input[type="password"],input[type="datetime-local"],input[type="date"],input[type="time"],select,textarea{
      width:100%;padding:10px 12px;border:1px solid var(--line);border-radius:8px;font:14px inherit
    }
    textarea{min-height:120px;resize:vertical}
    .hint{font-size:12px;color:var(--muted)}
    .vspace{margin-top:10px}

    @media (hover:none) and (pointer:coarse){
      .menu.dd:hover .dropdown{display:none}
    }
  </style>
</head>
<body>
  <header class="topbar">
    <a class="brand" href="#" title="홈(대시보드)">
      <div class="logo">1Q</div>
      <div class="sysname">1Q ON CATCH</div>
    </a>

    <!-- 네비게이션 -->
    <nav class="nav" aria-label="주요 메뉴" id="mainNav">
      <div class="menu"><button class="trigger" data-view="users">사용자 관리</button></div>
      <div class="menu"><button class="trigger" data-view="sending">발송 관리</button></div>
      <div class="menu"><button class="trigger" data-view="training">훈련 그룹 관리</button></div>

      <div class="menu dd" data-dd="phish">
        <button class="trigger has-dd" data-view="mailtpl">피싱메일 관리</button>
        <div class="dropdown">
          <button data-view="mailtpl">피싱 메일</button>
          <button data-view="pagetpl">피싱 페이지</button>
        </div>
      </div>

      <div class="menu dd" data-dd="camp">
        <button class="trigger has-dd" data-view="campaigns-home">훈련관리</button>
        <div class="dropdown">
          <button data-view="campaigns-home">모의 훈련</button>
          <button data-view="campaigns-view">훈련 조회</button>
          <button data-view="campaigns-end">훈련 종료 페이지</button>
        </div>
      </div>

      <div class="menu"><button class="trigger" data-view="logs">로그 관리</button></div>
    </nav>

    <!-- 계정 -->
    <div class="account">
      <div class="avatar" aria-hidden="true">1Q</div>
      <span class="user-name" id="userName">홍길동 (관리자)</span>
      <button class="auth-btn" id="authBtn" type="button">로그아웃</button>
    </div>
  </header>

  <main class="container">
    <!-- 대시보드 -->
    <section id="dashboard" class="section active">
      <div class="grid cols-3">
        <div class="kpi"><h3>이번 달 진행 훈련</h3><p>3건</p><div class="note">진행중 1 · 완료 2</div></div>
        <div class="kpi"><h3>피싱 메일 평균 클릭률</h3><p>7.8%</p><div class="note">전월 대비 ▼1.2%</div></div>
        <div class="kpi"><h3>보고 접수(의심 신고)</h3><p>42건</p><div class="note">자동/수동 합산</div></div>
      </div>
      <div class="grid cols-2 vspace">
        <div class="card">
          <div class="hd">최근 진행 훈련
            <button class="btn" data-search="dashboard">검색</button>
          </div>
          <div class="bd">
            <table class="tbl" aria-label="최근 진행 훈련">
              <thead><tr><th>이름</th><th>기간</th><th>대상</th><th>오픈</th><th>클릭</th><th>상세</th></tr></thead>
              <tbody>
                <tr><td>8월 정기 훈련</td><td>08.05~08.09</td><td>본사 1,200</td><td>76%</td><td>8.4%</td><td><a href="#" onclick="openOngoingDetail('C202508A')">보기</a></td></tr>
                <tr><td>IT본부 스피어</td><td>07.22~07.26</td><td>IT 430</td><td>81%</td><td>5.1%</td><td><a href="#" onclick="openDoneDetail('C202507S')">보기</a></td></tr>
                <tr><td>신입 오리엔테이션</td><td>07.01~07.03</td><td>신입 120</td><td>90%</td><td>3.3%</td><td><a href="#" onclick="openDoneDetail('C202507N')">보기</a></td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card">
          <div class="hd">알림 <button class="btn" data-search="alerts">검색</button></div>
          <div class="bd">
            <ul>
              <li>[주의] 클릭률 10% 초과 훈련 1건 존재 <span class="chip warn">임계 초과</span></li>
              <li>새 템플릿 승인 대기 2건 <span class="chip info">콘텐츠</span></li>
              <li>휴면 사용자 14명 <span class="chip bad">정비 필요</span></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 사용자 관리 -->
    <section id="users" class="section">
      <div class="card">
        <div class="hd" style="gap:12px">
          <span>사용자 목록</span>
          <div style="display:flex;gap:8px;align-items:center;flex:1;max-width:420px;margin-left:auto">
            <button class="btn grow" data-search="users">검색</button>
            <button class="btn grow primary" data-open="modal-user">+ 신규 등록</button>
          </div>
        </div>
        <div class="bd">
          <table class="tbl" aria-label="사용자 목록">
            <thead><tr><th>이름</th><th>아이디</th><th>이메일</th><th>권한</th><th>소속</th><th>상태</th><th>액션</th></tr></thead>
            <tbody>
              <tr><td>김하나</td><td>hana01</td><td>hana.kim@company.com</td><td>관리자</td><td>보안팀</td><td><span class="chip ok">활성</span></td><td><a href="#">수정</a> · <a href="#">삭제</a></td></tr>
              <tr><td>박철수</td><td>cpark</td><td>cs.park@company.com</td><td>운영자</td><td>운영팀</td><td><span class="chip ok">활성</span></td><td><a href="#">수정</a> · <a href="#">삭제</a></td></tr>
              <tr><td>이영희</td><td>ylee</td><td>yh.lee@company.com</td><td>사용자</td><td>영업팀</td><td><span class="chip warn">잠금</span></td><td><a href="#">해제</a> · <a href="#">삭제</a></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- 발송 관리 -->
    <section id="sending" class="section">
      <div class="card">
        <div class="hd">
          <span>발송 프로필</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="sending">검색</button>
            <button class="btn primary" data-open="modal-sender">+ 프로필 등록</button>
          </div>
        </div>
        <div class="bd">
          <table class="tbl">
            <thead><tr><th>프로필명</th><th>표시 이름</th><th>이메일</th><th>도메인 인증</th><th>테스트</th><th>관리</th></tr></thead>
            <tbody>
              <tr><td>기본</td><td>보안교육팀</td><td>training@company.com</td><td><span class="chip ok">SPF/DKIM OK</span></td><td><button class="btn" onclick="alert('테스트 발송 목업')">테스트</button></td><td><a href="#">수정</a> · <a href="#">삭제</a></td></tr>
              <tr><td>공지</td><td>공지</td><td>notice@company.com</td><td><span class="chip warn">SPF만 OK</span></td><td><button class="btn" onclick="alert('테스트 발송 목업')">테스트</button></td><td><a href="#">수정</a> · <a href="#">삭제</a></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- 훈련 그룹 관리 -->
    <section id="training" class="section">
      <div class="card">
        <div class="hd">
          <span>훈련 그룹</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="training">검색</button>
            <button class="btn primary" data-open="modal-group">+ 그룹 추가</button>
          </div>
        </div>
        <div class="bd">
          <table class="tbl">
            <thead><tr><th>그룹명</th><th>인원</th><th>설명</th><th>관리</th></tr></thead>
            <tbody>
              <tr><td>본사 전체</td><td>1,200</td><td>전 부서 공통</td><td><a href="#">편집</a> · <a href="#">삭제</a></td></tr>
              <tr><td>IT 본부</td><td>430</td><td>개발/운영/보안</td><td><a href="#">편집</a> · <a href="#">삭제</a></td></tr>
              <tr><td>신입사원</td><td>120</td><td>입사 3개월 이내</td><td><a href="#">편집</a> · <a href="#">삭제</a></td></tr>
            </tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- 피싱 메일 템플릿 -->
    <section id="mailtpl" class="section">
      <div class="card">
        <div class="hd">
          <span>피싱 메일 템플릿</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="mailtpl">검색</button>
            <button class="btn primary" data-open="modal-mailtpl">+ 신규 템플릿</button>
          </div>
        </div>
        <div class="bd">
          <div class="subnav">
            <span class="pill active">전체</span>
            <span class="pill">공지형</span>
            <span class="pill">경품형</span>
            <span class="pill">보안경고형</span>
          </div>
          <div class="grid cols-3 vspace">
            <div class="card">
              <div class="hd">보안 인식 교육 안내</div>
              <div class="bd">
                <div class="muted">열람 78% · 클릭 7.8%</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary" onclick="alert('이 템플릿으로 만들기 목업')">이 템플릿으로</button>
                  <button class="btn" onclick="alert('미리보기 목업')">미리보기</button>
                  <button class="btn" onclick="alert('복사 목업')">복사</button>
                  <button class="btn" onclick="alert('수정 목업')">수정</button>
                  <button class="btn" onclick="alert('삭제 목업')">삭제</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="hd">사내 이벤트 당첨 안내</div>
              <div class="bd">
                <div class="muted">열람 70% · 클릭 10.4%</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary" onclick="alert('이 템플릿으로 만들기 목업')">이 템플릿으로</button>
                  <button class="btn">미리보기</button>
                  <button class="btn">복사</button>
                  <button class="btn">수정</button>
                  <button class="btn">삭제</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="hd">패스워드 만료 경고</div>
              <div class="bd">
                <div class="muted">열람 82% · 클릭 4.2%</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary">이 템플릿으로</button>
                  <button class="btn">미리보기</button>
                  <button class="btn">복사</button>
                  <button class="btn">수정</button>
                  <button class="btn">삭제</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>  
    </section>

    <!-- 피싱 페이지 템플릿 -->
    <section id="pagetpl" class="section">
      <div class="card">
        <div class="hd">
          <span>피싱 페이지 템플릿</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="pagetpl">검색</button>
            <button class="btn primary" data-open="modal-pagetpl">+ 신규 템플릿</button>
          </div>
        </div>
        <div class="bd">
          <div class="grid cols-3">
            <div class="card">
              <div class="hd">사내 로그인 모조</div>
              <div class="bd">
                <div class="muted">수집 폼: ID/비밀번호, 2단계 안내</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary">이 템플릿으로</button>
                  <button class="btn">미리보기</button>
                  <button class="btn">복사</button>
                  <button class="btn">수정</button>
                  <button class="btn">삭제</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="hd">문서 다운로드 랜딩</div>
              <div class="bd">
                <div class="muted">추적: 다운로드/오픈</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary">이 템플릿으로</button>
                  <button class="btn">미리보기</button>
                  <button class="btn">복사</button>
                  <button class="btn">수정</button>
                  <button class="btn">삭제</button>
                </div>
              </div>
            </div>
            <div class="card">
              <div class="hd">보안 경고 리디렉션</div>
              <div class="bd">
                <div class="muted">추적: 클릭만, 즉시 리디렉트</div>
                <div class="vspace" style="display:flex;gap:8px;flex-wrap:wrap">
                  <button class="btn primary">이 템플릿으로</button>
                  <button class="btn">미리보기</button>
                  <button class="btn">복사</button>
                  <button class="btn">수정</button>
                  <button class="btn">삭제</button>
                </div>
              </div>
            </div>
          </div>  
        </div>
      </div>
    </section>

    <!-- 훈련관리: (1) 모의 훈련 -->
    <section id="campaigns-home" class="section">
      <div class="card">
        <div class="hd">
          <span>모의 훈련</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="campaigns-home">검색</button>
            <button class="btn primary" data-open="modal-campaign-new">+ 새 시나리오 작성</button>
          </div>
        </div>
        <div class="bd">
          <div class="hero">
            <div class="kpi"><h3>진행중</h3><p>1건</p></div>
            <div class="kpi"><h3>예약</h3><p>2건</p></div>
            <div class="kpi"><h3>완료</h3><p>12건</p></div>
          </div>
          <div class="card vspace">
            <div class="hd">저장된 시나리오 현황</div>
            <div class="bd">
              <table class="tbl">
                <thead><tr><th>시나리오명</th><th>대상 그룹</th><th>발송 프로필</th><th>메일/페이지 템플릿</th><th>상태</th><th>수정</th></tr></thead>
                <tbody>
                  <tr><td>9월 정기 훈련</td><td>본사 전체</td><td>기본</td><td>보안 인식 / 로그인 모조</td><td><span class="chip info">예약</span></td><td><a href="#">편집</a></td></tr>
                  <tr><td>IT본부 스피어</td><td>IT 본부</td><td>공지</td><td>경품 안내 / 다운로드 랜딩</td><td><span class="chip ok">완료</span></td><td><a href="#">편집</a></td></tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 훈련관리: (2) 훈련 조회 -->
    <section id="campaigns-view" class="section">
      <div class="grid cols-2">
        <div class="card">
          <div class="hd">진행중 훈련</div> <!-- ← 검색 버튼 제거 -->
          <div class="bd">
            <table class="tbl">
              <thead><tr><th>이름</th><th>기간</th><th>대상</th><th>상태</th><th>상세</th></tr></thead>
              <tbody>
                <tr><td>8월 정기 훈련</td><td>08.05~08.09</td><td>본사 1,200</td><td><span class="chip info">발송중</span></td><td><a href="#" onclick="openOngoingDetail('C202508A')">보기</a></td></tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="card">
          <div class="hd">완료된 훈련</div>
          <div class="bd">
            <table class="tbl">
              <thead><tr><th>이름</th><th>기간</th><th>오픈</th><th>클릭</th><th>관리</th></tr></thead>
              <tbody>
                <tr><td>IT본부 스피어</td><td>07.22~07.26</td><td>81%</td><td>5.1%</td><td><a href="#" onclick="openDoneDetail('C202507S')">상세</a> · <a href="#" onclick="confirm('삭제하시겠습니까?')&&alert('삭제 목업')">삭제</a></td></tr>
                <tr><td>신입 오리엔테이션</td><td>07.01~07.03</td><td>90%</td><td>3.3%</td><td><a href="#" onclick="openDoneDetail('C202507N')">상세</a> · <a href="#" onclick="confirm('삭제하시겠습니까?')&&alert('삭제 목업')">삭제</a></td></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- 훈련관리: (3) 훈련 종료 페이지 -->
    <section id="campaigns-end" class="section">
      <div class="card">
        <div class="hd">
          <span>훈련 종료 페이지</span>
          <div style="display:flex;gap:8px;align-items:center">
            <button class="btn" data-search="campaigns-end">검색</button>
            <button class="btn primary" data-open="modal-endtpl">+ 신규 템플릿</button>
          </div>
        </div>
        <div class="bd">
          <div class="empty">훈련 종료 후 안내/교육 페이지 템플릿 목록(목업)</div>
        </div>
      </div>
    </section>

    <!-- 로그 관리 -->
    <section id="logs" class="section">
      <div class="card">
        <div class="hd">감사 로그 <button class="btn" data-search="logs">검색</button></div>
        <div class="bd">
          <table class="tbl" aria-label="감사 로그">
            <thead><tr><th>시간</th><th>사용자</th><th>행동</th><th>대상</th><th>IP</th></tr></thead>
            <tbody>
              <tr><td>2025-08-18 09:12</td><td>홍길동(관리자)</td><td>템플릿 수정</td><td>#TMP-001 보안 인식</td><td>10.10.1.120</td></tr>
              <tr><td>2025-08-18 09:05</td><td>박철수(운영자)</td><td>훈련 생성</td><td>#C202508A 8월 정기</td><td>10.10.1.98</td></tr>
              <tr><td>2025-08-17 17:44</td><td>이영희(조회)</td><td>결과 열람</td><td>#C202507S 상세</td><td>10.10.3.45</td></tr>
            </tbody>
          </table>
          <div class="muted vspace">※ 보존정책: 1년 · 내보내기(PDF/CSV) 버튼은 추후 연동</div>
        </div>
      </div>
    </section>

    <!-- 진행중 훈련 상세 -->
    <section id="campaign-detail-ongoing" class="section">
      <div class="card">
        <div class="hd">
          <span>진행중 훈련 상세 – <span id="ongoingCode">-</span></span>
          <button class="btn" onclick="activate('campaigns-view')">목록으로</button>
        </div>
        <div class="bd">
          <div class="grid cols-3">
            <div class="kpi"><h3>오픈율</h3><p>74%</p><div class="note">실시간 갱신(목업)</div></div>
            <div class="kpi"><h3>클릭률</h3><p>6.9%</p><div class="note">전일 +0.4%p</div></div>
            <div class="kpi"><h3>신고</h3><p>18건</p><div class="note">CS/보안포털 합산</div></div>
          </div>
          <div class="grid cols-2 vspace">
            <div class="card">
              <div class="hd">부서별 분포</div>
              <div class="bd">
                <table class="tbl">
                  <thead><tr><th>부서</th><th>대상</th><th>오픈</th><th>클릭</th></tr></thead>
                  <tbody><tr><td>개발</td><td>220</td><td>79%</td><td>7.2%</td></tr><tr><td>운영</td><td>160</td><td>72%</td><td>6.1%</td></tr><tr><td>보안</td><td>50</td><td>88%</td><td>3.5%</td></tr></tbody>
                </table>
              </div>
            </div>
            <div class="card">
              <div class="hd">시간대별 추이</div>
              <div class="bd"><div class="empty">라인 차트 자리(목업)</div></div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 완료된 훈련 상세 -->
    <section id="campaign-detail-done" class="section">
      <div class="card">
        <div class="hd">
          <span>완료된 훈련 상세 – <span id="doneCode">-</span></span>
          <button class="btn" onclick="activate('campaigns-view')">목록으로</button>
        </div>
        <div class="bd">
          <div class="grid cols-3">
            <div class="kpi"><h3>최종 오픈율</h3><p>81%</p><div class="note">목표 대비 +3%p</div></div>
            <div class="kpi"><h3>최종 클릭률</h3><p>5.1%</p><div class="note">목표 대비 -0.9%p</div></div>
            <div class="kpi"><h3>다운로드</h3><p>24건</p><div class="note">악성 샘플 포함</div></div>
          </div>
          <div class="grid cols-2 vspace">
            <div class="card">
              <div class="hd">그룹/직급 분포</div>
              <div class="bd">
                <table class="tbl">
                  <thead><tr><th>구분</th><th>대상</th><th>오픈</th><th>클릭</th></tr></thead>
                  <tbody><tr><td>신입</td><td>120</td><td>90%</td><td>3.3%</td></tr><tr><td>IT 본부</td><td>430</td><td>81%</td><td>5.1%</td></tr><tr><td>본사</td><td>1200</td><td>76%</td><td>8.4%</td></tr></tbody>
                </table>
              </div>
            </div>
            <div class="card">
              <div class="hd">의심 신고 현황</div>
              <div class="bd">
                <ul>
                  <li>보안 포털 신고: 38건</li>
                  <li>메일 회신 신고: 6건</li>
                  <li>자동 격리: 2건</li>
                </ul>
              </div>
            </div>
          </div>          
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">© 2025 1Q ON CATCH · 내부 보고용 목업 화면</footer>

  <!-- 모달들 -->
  <!-- 사용자 신규 등록 -->
  <div class="modal" id="modal-user" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">신규 사용자 등록 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline">
            <div><label>사용자명</label><input type="text" placeholder="예: 김하나"></div>
            <div><label>아이디</label><input type="text" placeholder="예: hana01"></div>
          </div>
          <div class="row inline">
            <div><label>비밀번호</label><input type="password" placeholder="••••••••"></div>
            <div><label>권한</label><select><option>관리자</option><option>운영자</option><option>사용자</option></select></div>
          </div>
          <div class="row inline">
            <div><label>소속</label><input type="text" placeholder="예: 보안팀"></div>
            <div><label>상태</label><select><option>활성</option><option>잠금</option></select></div>
          </div>
        </div>
      </div>
      <div class="ft" style="width:100%">
        <button class="btn block primary" onclick="alert('사용자 등록(목업)');closeAllModals()">등록</button>
      </div>
    </div>
  </div>

  <!-- 발송 프로필 등록 -->
  <div class="modal" id="modal-sender" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">발송 프로필 등록 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline">
            <div><label>표시 이름</label><input type="text" placeholder="보안교육팀"></div>
            <div><label>이메일</label><input type="email" placeholder="training@company.com"></div>
          </div>
          <div class="hint">※ SMTP 연결정보는 백엔드/환경변수에서 관리(목업).</div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('프로필 저장(목업)');closeAllModals()">저장</button></div>
    </div>
  </div>

  <!-- 훈련 그룹: 그룹 추가 / CSV 일괄 + 개별 추가 -->
  <div class="modal" id="modal-group" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">훈련 그룹 추가 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline">
            <div><label>그룹명</label><input type="text" placeholder="예: 본사 전체"></div>
            <div><label>설명</label><input type="text" placeholder="예: 전 부서 공통"></div>
          </div>

          <div class="row">
            <label>CSV 업로드(일괄)</label>
            <input type="file" accept=".csv">
            <div class="hint">형식: 이름,직급,이메일,부서</div>
          </div>

          <div class="row">
            <label>개별 추가</label>
            <div class="row inline">
              <div><input type="text" placeholder="이름"></div>
              <div><input type="text" placeholder="직급"></div>
            </div>
            <div class="row inline">
              <div><input type="email" placeholder="이메일"></div>
              <div><input type="text" placeholder="부서"></div>
            </div>
            <div style="display:flex;justify-content:flex-end"><button class="btn" onclick="alert('개별 추가(목업)')">+ 추가</button></div>
          </div>

          <div class="row">
            <label>미리보기</label>
            <div class="empty">CSV/개별 입력 미리보기 영역(목업)</div>
          </div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('그룹 저장(목업)');closeAllModals()">저장</button></div>
    </div>
  </div>

  <!-- 피싱 메일 신규 템플릿 (첨부 업로드 포함) -->
  <div class="modal" id="modal-mailtpl" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">피싱 메일 템플릿 생성 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline">
            <div><label>템플릿명</label><input type="text" placeholder="예: 보안 인식 교육 안내"></div>
            <div><label>분류</label><select><option>공지형</option><option>경품형</option><option>보안경고형</option></select></div>
          </div>
          <div class="row"><label>제목</label><input type="text" placeholder="[필독] 보안 인식 교육 안내"></div>
          <div class="row"><label>본문(HTML)</label><textarea placeholder="HTML 본문"></textarea></div>
          <div class="row"><label>첨부 파일</label><input type="file" multiple></div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('메일 템플릿 저장(목업)');closeAllModals()">저장</button></div>
    </div>
  </div>

  <!-- 피싱 페이지 신규 템플릿 -->
  <div class="modal" id="modal-pagetpl" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">피싱 페이지 템플릿 생성 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline">
            <div><label>템플릿명</label><input type="text" placeholder="예: 사내 로그인 모조"></div>
            <div><label>유형</label><select><option>로그인 폼</option><option>다운로드 랜딩</option><option>경고/리디렉션</option></select></div>
          </div>
          <div class="row"><label>설명</label><input type="text" placeholder="템플릿 설명"></div>
          <div class="row"><label>HTML/스크립트</label><textarea placeholder="HTML/JS 코드"></textarea></div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('페이지 템플릿 저장(목업)');closeAllModals()">저장</button></div>
    </div>
  </div>

  <!-- 모의 훈련: 새 시나리오 (캘린더/시간 선택으로 변경) -->
  <div class="modal" id="modal-campaign-new" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">새 시나리오 작성 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row"><label>훈련명</label><input type="text" placeholder="예: 9월 정기 훈련"></div>
          <div class="row">
            <label>훈련 기간 (시작/종료)</label>
            <div class="row inline">
              <div>
                <label class="hint">시작 일시</label>
                <input type="datetime-local" id="campaignStart" value="">
              </div>
              <div>
                <label class="hint">종료 일시</label>
                <input type="datetime-local" id="campaignEnd" value="">
              </div>
            </div>
            <div class="hint">캘린더에서 날짜를 선택하고 시간도 직접 지정할 수 있습니다.</div>
          </div>
          <div class="row inline">
            <div><label>피싱메일 템플릿</label><select><option>보안 인식 교육 안내</option><option>사내 이벤트 당첨</option><option>패스워드 만료 경고</option></select></div>
            <div><label>피싱페이지 템플릿</label><select><option>사내 로그인 모조</option><option>문서 다운로드 랜딩</option><option>보안 경고 리디렉션</option></select></div>
          </div>
          <div class="row inline">
            <div><label>발송 프로필</label><select><option>기본</option><option>공지</option></select></div>
            <div><label>훈련대상</label><select><option>본사 전체</option><option>IT 본부</option><option>신입사원</option></select></div>
          </div>
          <div class="row"><label>훈련 종료 페이지</label><select><option>기본 종료 안내 v1</option><option>보안교육 링크형 v2</option></select></div>
        </div>
      </div>
      <div class="ft">
        <button class="btn" data-close>취소</button>
        <button class="btn primary" onclick="saveScenario()">저장</button>
      </div>
    </div>
  </div>

  <!-- 훈련 종료 페이지 신규 템플릿 -->
  <div class="modal" id="modal-endtpl" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd">훈련 종료 페이지 템플릿 <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row inline"><div><label>템플릿명</label><input type="text" placeholder="예: 종료 안내/학습 링크"></div><div><label>버전</label><input type="text" placeholder="v1.0"></div></div>
          <div class="row"><label>본문(HTML)</label><textarea placeholder="종료 페이지 HTML"></textarea></div>
          <div class="row"><label>추가 안내</label><input type="text" placeholder="문의처/보안포털 링크 등"></div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('종료 페이지 템플릿 저장(목업)');closeAllModals()">저장</button></div>
    </div>
  </div>

  <!-- 공통 검색 모달 -->
  <div class="modal" id="modal-search" aria-hidden="true">
    <div class="dialog" role="dialog" aria-modal="true">
      <div class="hd"><span id="searchTitle">검색</span> <button class="btn" data-close>닫기</button></div>
      <div class="bd">
        <div class="form">
          <div class="row"><label id="searchLabel">키워드</label><input type="text" id="searchInput" placeholder=""></div>
          <div class="row inline">
            <div><label>시작일</label><input type="date"></div>
            <div><label>종료일</label><input type="date"></div>
          </div>
          <div class="row"><label>세부 옵션</label>
            <select>
              <option>전체</option>
              <option>이름</option>
              <option>이메일/아이디</option>
              <option>상태/권한</option>
            </select>
          </div>
        </div>
      </div>
      <div class="ft"><button class="btn" data-close>취소</button><button class="btn primary" onclick="alert('검색(목업): '+document.getElementById('searchInput').value);closeAllModals()">검색</button></div>
    </div>
  </div>

  <script>
    // 섹션 전환
    const sections = document.querySelectorAll('.section');
    const triggers = document.querySelectorAll('.trigger');
    function activate(view){
      sections.forEach(s=>s.classList.toggle('active', s.id===view));
      triggers.forEach(t=>t.classList.toggle('active', t.dataset.view===view));
      window.scrollTo({top:0,behavior:'smooth'});
    }
    triggers.forEach(t=> t.addEventListener('click', ()=> activate(t.dataset.view)));

    // 브랜드 클릭 = 대시보드
    document.querySelector('.brand').addEventListener('click',(e)=>{
      e.preventDefault(); activate('dashboard');
    });

    // 로그인/로그아웃 토글 (목업)
    const authBtn = document.getElementById('authBtn');
    const userName = document.getElementById('userName');
    let loggedIn = true;
    authBtn.addEventListener('click', ()=>{
      loggedIn = !loggedIn;
      authBtn.textContent = loggedIn ? '로그아웃' : '로그인';
      userName.textContent = loggedIn ? '홍길동 (관리자)' : '게스트';
    });

    // 공통 모달 열기/닫기
    function closeAllModals(){
      document.querySelectorAll('.modal').forEach(m=>m.classList.remove('open'));
      document.body.style.overflow='';
    }
    document.querySelectorAll('[data-open]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-open');
        const modal = document.getElementById(id);
        modal?.classList.add('open'); document.body.style.overflow='hidden';
      });
    });
    document.querySelectorAll('[data-close]').forEach(btn=> btn.addEventListener('click', closeAllModals));
    document.querySelectorAll('.modal').forEach(m=> m.addEventListener('click',(e)=>{ if(e.target===m) closeAllModals(); }));

    // 공통 검색 모달
    const searchConfig = {
      dashboard:{title:'대시보드 검색', label:'훈련명/메모', ph:'예: 8월 정기 훈련'},
      alerts:{title:'알림 검색', label:'키워드', ph:'예: 클릭률, 템플릿'},
      users:{title:'사용자 검색', label:'이름/아이디/이메일', ph:'예: 김하나 / hana01 / user@company.com'},
      sending:{title:'발송 프로필 검색', label:'프로필/표시이름/이메일', ph:'예: 기본 / 보안교육팀 / training@'},
      training:{title:'훈련 그룹 검색', label:'그룹명/설명', ph:'예: IT 본부 / 신입'},
      mailtpl:{title:'피싱 메일 템플릿 검색', label:'템플릿/제목/분류', ph:'예: 보안 인식 / 공지형'},
      pagetpl:{title:'피싱 페이지 템플릿 검색', label:'템플릿/유형', ph:'예: 로그인 / 다운로드'},
      'campaigns-home':{title:'모의 훈련 검색', label:'시나리오/대상', ph:'예: 정기 / 본사'},
      'campaigns-view':{title:'훈련 조회 검색', label:'훈련명/기간', ph:'예: 8월 정기'},
      'campaigns-end':{title:'훈련 종료 페이지 검색', label:'템플릿/버전', ph:'예: 안내 v1'},
      logs:{title:'감사 로그 검색', label:'사용자/행동/대상', ph:'예: 템플릿 수정 / C2025'}
    };
    document.querySelectorAll('[data-search]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.getAttribute('data-search');
        const cfg = searchConfig[key] || {title:'검색', label:'키워드', ph:''};
        document.getElementById('searchTitle').textContent = cfg.title;
        document.getElementById('searchLabel').textContent = cfg.label;
        document.getElementById('searchInput').placeholder = cfg.ph;
        document.getElementById('modal-search').classList.add('open');
        document.body.style.overflow='hidden';
      });
    });

    // 드롭다운 호버 유지 개선: 닫힘 지연(300ms) + 클릭 토글
    document.querySelectorAll('.menu.dd').forEach(menu=>{
      let hideTimer=null;
      const open=()=>{ clearTimeout(hideTimer); menu.classList.add('open'); };
      const close=()=>{ hideTimer=setTimeout(()=>menu.classList.remove('open'),300); };
      menu.addEventListener('mouseenter', open);
      menu.addEventListener('mouseleave', close);
      const trigger=menu.querySelector('.trigger');
      trigger.addEventListener('click', (e)=>{
        if(menu.classList.contains('open')){ menu.classList.remove('open'); }
        else { menu.classList.add('open'); }
      });
    });

    // 드롭다운 하위 메뉴 클릭 시 섹션 전환 + 하이라이트 + 닫기
    document.querySelectorAll('.dropdown [data-view]').forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const view = btn.dataset.view;
        activate(view);
        const parentMenu = btn.closest('.menu.dd');
        if (parentMenu) {
          const topTrigger = parentMenu.querySelector('.trigger');
          document.querySelectorAll('.trigger').forEach(t => t.classList.remove('active'));
          if (topTrigger) topTrigger.classList.add('active');
        }
        document.querySelectorAll('.menu.dd.open').forEach(m => m.classList.remove('open'));
      });
    });

    // 진행/완료 상세 페이지 전환
    function openOngoingDetail(code){
      document.getElementById('ongoingCode').textContent = code;
      activate('campaign-detail-ongoing');
    }
    function openDoneDetail(code){
      document.getElementById('doneCode').textContent = code;
      activate('campaign-detail-done');
    }
    window.openOngoingDetail=openOngoingDetail;
    window.openDoneDetail=openDoneDetail;

    // 시나리오 저장(목업) + 기간 검증 예시
    function saveScenario(){
      const s = document.getElementById('campaignStart').value;
      const e = document.getElementById('campaignEnd').value;
      if(!s || !e){ alert('시작/종료 일시를 선택해주세요.'); return; }
      if(new Date(s) >= new Date(e)){ alert('종료 일시는 시작 일시 이후여야 합니다.'); return; }
      alert(`시나리오 저장(목업)\n- 시작: ${s}\n- 종료: ${e}`);
      closeAllModals();
    }
    window.saveScenario=saveScenario;
  </script>
</body>
</html>
